(function(){"use strict";var e={9893:function(e,t,o){var n=o(9242),r=o(3396);const s=(0,r.Uk)("Home"),l=(0,r.Uk)(" | "),a=(0,r.Uk)("Register"),u=(0,r.Uk)(" | "),i=(0,r.Uk)("Log out"),c=(0,r.Uk)("Log in"),d=(0,r.Uk)(" | "),b=(0,r.Uk)("View Jobs"),m=(0,r.Uk)(" | "),p=(0,r.Uk)("Create Job");function h(e,t,o,n,h,g){const _=(0,r.up)("router-link"),j=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("nav",null,[(0,r.Wm)(_,{to:{name:"home"}},{default:(0,r.w5)((()=>[s])),_:1}),l,(0,r.Wm)(_,{to:{name:"register"}},{default:(0,r.w5)((()=>[a])),_:1}),u,g.isLoggedIn?((0,r.wg)(),(0,r.j4)(_,{key:0,onClick:g.logout,to:{name:"logout"}},{default:(0,r.w5)((()=>[i])),_:1},8,["onClick"])):((0,r.wg)(),(0,r.j4)(_,{key:1,to:{name:"login"}},{default:(0,r.w5)((()=>[c])),_:1})),d,g.isLoggedIn?((0,r.wg)(),(0,r.j4)(_,{key:2,to:{name:"view-jobs"}},{default:(0,r.w5)((()=>[b])),_:1})):(0,r.kq)("",!0),m,g.isLoggedIn?((0,r.wg)(),(0,r.j4)(_,{key:3,to:{name:"create-job"}},{default:(0,r.w5)((()=>[p])),_:1})):(0,r.kq)("",!0)]),(0,r.Wm)(j)],64)}var g=o(7139),_=o(6265),j=o.n(_);const f=j().create({baseURL:"https://jobs-api-0.herokuapp.com/api/v1",withCredentials:!1,headers:{Accept:"application/json","Content-Type":"application/json"}});var w={registerUser(e){return f.post("/auth/register",e)},loginUser(e){return f.post("/auth/login",e)},createJob(e){return f.post("/jobs",e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})},getJobs(){return f.get("/jobs",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})},getJob(e){return f.get("/jobs/"+e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})},updateJob(e,t){return console.log(t),f.patch("/jobs/"+e,t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})},deleteJob(e){return f.delete("/jobs/"+e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})}},v=(0,g.MT)({state:{user:{},payload:{},jobs:[],job:{},msg:"",isLoggedIn:!1},getters:{},mutations:{CREATE_USER(e,t){e.user=t},GET_PAYLOAD(e,t){e.payload=t},SET_JOBS(e,t){e.jobs=t},SET_JOB(e,t){e.job=t},LOGIN_USER(e){e.isLoggedIn=!0},SET_MSG(e,t){e.msg=t}},actions:{createUser({commit:e},t){return w.registerUser(t).then((()=>{e("CREATE_USER",t),e("SET_MSG","Successfully registered")})).catch((t=>{console.log(t),e("SET_MSG","Incomplete fields or password too short")}))},logUser({commit:e},t){return w.loginUser(t).then((t=>{t.data&&(e("GET_PAYLOAD",t.data),e("LOGIN_USER"),e("SET_MSG","Successfully logged in"),localStorage.setItem("token",t.data.token),localStorage.setItem("isLoggedIn",!0))})).catch((t=>{e("SET_MSG","Invalid email or password"),console.log(t)}))},fetchJobs({commit:e}){return w.getJobs().then((t=>{e("SET_JOBS",t.data)})).catch((e=>{console.log(e)}))},fetchJob({commit:e},t){return w.getJob(t).then((t=>{e("SET_JOB",t.data)})).catch((e=>{console.log(e)}))},createJob({commit:e},t){return w.createJob(t).then((o=>{console.log(o.data),e("SET_JOB",t),e("SET_MSG","Successfully created job")})).catch((t=>{console.log(t),e("SET_MSG","Failed to create job")}))},patchJob({commit:e},t){return w.updateJob(t.id,t.job).then((()=>{e("SET_JOB",t.job),e("SET_MSG","Successfully updated job")})).catch((t=>{console.log(t),e("SET_MSG","Failed to update job")}))}},modules:{}}),y={computed:{isLoggedIn(){return v.state.isLoggedIn}},methods:{logout(){v.state.isLoggedIn=!1}}},S=o(89);const k=(0,S.Z)(y,[["render",h]]);var U=k,J=o(2483),E=o(2268);const I=(0,r._)("h1",null,"Homepage",-1),C={key:0},L={key:1};function O(e,t,o,n,s,l){return(0,r.wg)(),(0,r.iD)(r.HY,null,[I,(0,r._)("div",null,[l.isLoggedIn?((0,r.wg)(),(0,r.iD)("h4",C,"Hello, "+(0,E.zw)(l.username),1)):((0,r.wg)(),(0,r.iD)("h4",L,"Please login to get access to the jobs"))])],64)}var T={computed:{username(){return this.$store.state.payload.user.name},isLoggedIn(){return this.$store.state.isLoggedIn}}};const $=(0,S.Z)(T,[["render",O]]);var D=$;const M=e=>((0,r.dD)("data-v-2b2d6c45"),e=e(),(0,r.Cn)(),e),z={class:"form-container"},A=M((()=>(0,r._)("h1",null,"Register",-1))),G=M((()=>(0,r._)("label",null,"Name: ",-1))),P=M((()=>(0,r._)("br",null,null,-1))),B=M((()=>(0,r._)("br",null,null,-1))),V=M((()=>(0,r._)("label",{for:"email"},"Email: ",-1))),x=M((()=>(0,r._)("br",null,null,-1))),H=M((()=>(0,r._)("br",null,null,-1))),R=M((()=>(0,r._)("label",{for:"password"},"Password: ",-1))),Y=M((()=>(0,r._)("br",null,null,-1))),Z=M((()=>(0,r._)("br",null,null,-1))),q=M((()=>(0,r._)("input",{type:"submit",value:"Submit"},null,-1))),F=M((()=>(0,r._)("br",null,null,-1)));function N(e,t,o,s,l,a){return(0,r.wg)(),(0,r.iD)("div",z,[A,(0,r._)("form",{onSubmit:t[3]||(t[3]=(0,n.iM)(((...e)=>a.onSubmit&&a.onSubmit(...e)),["prevent"]))},[G,P,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.user.name=e)},null,512),[[n.nr,l.user.name]]),B,V,x,(0,r.wy)((0,r._)("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=e=>l.user.email=e)},null,512),[[n.nr,l.user.email]]),H,R,Y,(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>l.user.password=e)},null,512),[[n.nr,l.user.password]]),Z,q,F,(0,r._)("h4",null,(0,E.zw)(l.msg),1)],32)])}var W={data(){return{user:{name:"",email:"",password:""},msg:""}},methods:{onSubmit(){const e=this.user;this.$store.dispatch("createUser",e).then((()=>{console.log(e),this.msg=this.$store.state.msg})).catch((e=>{console.log(e),this.msg=this.$store.state.msg}))}}};const K=(0,S.Z)(W,[["render",N],["__scopeId","data-v-2b2d6c45"]]);var Q=K;const X=e=>((0,r.dD)("data-v-81e6cecc"),e=e(),(0,r.Cn)(),e),ee={class:"form-container"},te=X((()=>(0,r._)("h1",null,"Login",-1))),oe=X((()=>(0,r._)("label",null,"Email: ",-1))),ne=X((()=>(0,r._)("br",null,null,-1))),re=X((()=>(0,r._)("br",null,null,-1))),se=X((()=>(0,r._)("label",null,"Password: ",-1))),le=X((()=>(0,r._)("br",null,null,-1))),ae=X((()=>(0,r._)("br",null,null,-1))),ue=X((()=>(0,r._)("input",{type:"submit",value:"Submit"},null,-1)));function ie(e,t,o,s,l,a){return(0,r.wg)(),(0,r.iD)("div",ee,[te,(0,r._)("form",{onSubmit:t[2]||(t[2]=(0,n.iM)(((...e)=>a.onSubmit&&a.onSubmit(...e)),["prevent"]))},[oe,ne,(0,r.wy)((0,r._)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>l.user.email=e)},null,512),[[n.nr,l.user.email]]),re,se,le,(0,r.wy)((0,r._)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>l.user.password=e)},null,512),[[n.nr,l.user.password]]),ae,ue],32),(0,r._)("h4",null,(0,E.zw)(l.msg),1)])}var ce={data(){return{user:{email:"",password:""},msg:""}},methods:{onSubmit(){const e=this.user;this.$store.dispatch("logUser",e).then((()=>{this.msg=this.$store.state.msg})).catch((e=>{console.log(e),this.msg=this.$store.state.msg}))}}};const de=(0,S.Z)(ce,[["render",ie],["__scopeId","data-v-81e6cecc"]]);var be=de;const me=e=>((0,r.dD)("data-v-1be1aba2"),e=e(),(0,r.Cn)(),e),pe=me((()=>(0,r._)("h1",null,"View Jobs",-1))),he={key:0,class:"jobs"},ge={key:1},_e=me((()=>(0,r._)("h3",null,"You have no jobs. Create a job and it will appear here.",-1))),je=[_e];function fe(e,t,o,n,s,l){const a=(0,r.up)("JobCards");return(0,r.wg)(),(0,r.iD)(r.HY,null,[pe,l.hasJobs?((0,r.wg)(),(0,r.iD)("div",he,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.jobs,(e=>((0,r.wg)(),(0,r.j4)(a,{key:e._id,job:e},null,8,["job"])))),128))])):((0,r.wg)(),(0,r.iD)("div",ge,je))],64)}const we={class:"job-card"};function ve(e,t,o,n,s,l){const a=(0,r.up)("router-link");return(0,r.wg)(),(0,r.j4)(a,{class:"job-link",to:{name:"job-details",params:{id:o.job._id}}},{default:(0,r.w5)((()=>[(0,r._)("div",we,[(0,r._)("h4",null,(0,E.zw)(o.job.company),1),(0,r._)("span",null,(0,E.zw)(o.job.position),1)])])),_:1},8,["to"])}var ye={props:{job:{type:Object,required:!0}}};const Se=(0,S.Z)(ye,[["render",ve],["__scopeId","data-v-98802cac"]]);var ke=Se,Ue={data(){return{msg:""}},components:{JobCards:ke},created(){this.$store.dispatch("fetchJobs").catch((e=>{console.log("jobs could not be fetched")}))},computed:{jobs(){return this.$store.state.jobs.jobs},hasJobs(){return this.$store.state.jobs.count>0}}};const Je=(0,S.Z)(Ue,[["render",fe],["__scopeId","data-v-1be1aba2"]]);var Ee=Je;const Ie=(0,r._)("h1",null,"Create a job",-1),Ce={class:"form-container"},Le=(0,r._)("h3",null,"Name & describe your job",-1),Oe=(0,r._)("label",null,"Company",-1),Te=(0,r._)("br",null,null,-1),$e=(0,r._)("br",null,null,-1),De=(0,r._)("label",null,"Position",-1),Me=(0,r._)("br",null,null,-1),ze=(0,r._)("br",null,null,-1),Ae=(0,r._)("button",{type:"submit"},"Submit",-1),Ge=(0,r._)("br",null,null,-1);function Pe(e,t,o,s,l,a){return(0,r.wg)(),(0,r.iD)(r.HY,null,[Ie,(0,r._)("div",Ce,[(0,r._)("form",{onSubmit:t[2]||(t[2]=(0,n.iM)(((...e)=>a.onSubmit&&a.onSubmit(...e)),["prevent"]))},[Le,Oe,Te,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.job.company=e),type:"text",placeholder:"Company"},null,512),[[n.nr,l.job.company]]),$e,De,Me,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.job.position=e),type:"text",placeholder:"Position"},null,512),[[n.nr,l.job.position]]),ze,Ae,Ge,(0,r._)("h4",null,(0,E.zw)(l.msg),1)],32)])],64)}var Be={data(){return{job:{company:"",position:""},msg:""}},methods:{onSubmit(){const e=this.job;this.$store.dispatch("createJob",e).then((()=>{console.log(e),this.msg=this.$store.state.msg,this.$router.push({name:"view-jobs"})})).catch((e=>{console.log(e),this.msg=this.$store.state.msg}))}}};const Ve=(0,S.Z)(Be,[["render",Pe]]);var xe=Ve;const He={key:0},Re=(0,r._)("br",null,null,-1),Ye={key:1};function Ze(e,t,o,n,s,l){const a=(0,r.up)("UpdateJob");return(0,r.wg)(),(0,r.iD)(r.HY,null,[l.job?((0,r.wg)(),(0,r.iD)("div",He,[(0,r._)("h1",null,(0,E.zw)(l.job.position),1),(0,r._)("h3",null,"From: "+(0,E.zw)(l.job.company),1),(0,r._)("p",null,"Created at: "+(0,E.zw)(l.job.createdAt.slice(0,10)),1)])):(0,r.kq)("",!0),(0,r._)("button",{onClick:t[0]||(t[0]=(...e)=>l.removeJob&&l.removeJob(...e))},"Delete"),(0,r._)("button",{onClick:t[1]||(t[1]=(...e)=>l.toggleUpdate&&l.toggleUpdate(...e))},"Edit"),Re,(0,r._)("h4",null,(0,E.zw)(s.msg),1),s.updateMenu?((0,r.wg)(),(0,r.iD)("div",Ye,[(0,r.Wm)(a)])):(0,r.kq)("",!0)],64)}const qe={class:"form-container"},Fe=(0,r._)("h3",null,"Enter your new job description",-1),Ne=(0,r._)("label",null,"Company",-1),We=(0,r._)("br",null,null,-1),Ke=(0,r._)("br",null,null,-1),Qe=(0,r._)("label",null,"Position",-1),Xe=(0,r._)("br",null,null,-1),et=(0,r._)("br",null,null,-1),tt=(0,r._)("button",{type:"submit"},"Submit",-1),ot=(0,r._)("br",null,null,-1);function nt(e,t,o,s,l,a){return(0,r.wg)(),(0,r.iD)("div",qe,[(0,r._)("form",{onSubmit:t[2]||(t[2]=(0,n.iM)(((...e)=>a.onSubmit&&a.onSubmit(...e)),["prevent"]))},[Fe,Ne,We,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.job.company=e),type:"text",placeholder:"Company"},null,512),[[n.nr,l.job.company]]),Ke,Qe,Xe,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.job.position=e),type:"text",placeholder:"Position"},null,512),[[n.nr,l.job.position]]),et,tt,ot,(0,r._)("h4",null,(0,E.zw)(l.msg),1)],32)])}var rt={data(){return{job:{company:"",position:""},msg:""}},methods:{onSubmit(){const e=this.job,t=this.$store.state.job.job._id;this.$store.dispatch("patchJob",{id:t,job:e}).then((()=>{this.msg=this.$store.state.msg,this.$router.push({name:"view-jobs"})})).catch((e=>{console.log(e),this.msg=this.$store.state.msg}))}}};const st=(0,S.Z)(rt,[["render",nt]]);var lt=st,at={props:["id"],data(){return{msg:"",updateMenu:!1}},components:{UpdateJob:lt},created(){this.$store.dispatch("fetchJob",this.id).catch((e=>{console.log(e)}))},computed:{job(){return this.$store.state.job.job}},methods:{toggleUpdate(){this.updateMenu=!this.updateMenu},removeJob(){return w.deleteJob(this.job._id).then((()=>{console.log(this.job),this.msg="Successfully deleted job",this.$router.push({name:"view-jobs"})})).catch((e=>{console.log(e),this.msg="Something went wrong somehow"}))}}};const ut=(0,S.Z)(at,[["render",Ze]]);var it=ut,ct=o(530),dt=o.n(ct);const bt=[{path:"/",name:"home",component:D},{path:"/register",name:"register",component:Q},{path:"/login",name:"login",component:be},{path:"/jobs",name:"view-jobs",component:Ee,beforeEnter:()=>{v.state.isLoggedIn||mt.push({name:"home"})}},{path:"/jobs/:id",name:"job-details",props:!0,component:it,beforeEnter:()=>{v.state.isLoggedIn||mt.push({name:"home"})}},{path:"/jobs/create",name:"create-job",component:xe,beforeEnter:()=>{v.state.isLoggedIn||mt.push({name:"home"})}},{path:"/logout",name:"logout",component:D,redirect:"/"}],mt=(0,J.p7)({history:(0,J.PO)("/"),routes:bt});mt.beforeEach((()=>{dt().start()})),mt.afterEach((()=>{dt().done()}));var pt=mt;(0,n.ri)(U).use(v).use(pt).mount("#app")}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,n,r,s){if(!n){var l=1/0;for(c=0;c<e.length;c++){n=e[c][0],r=e[c][1],s=e[c][2];for(var a=!0,u=0;u<n.length;u++)(!1&s||l>=s)&&Object.keys(o.O).every((function(e){return o.O[e](n[u])}))?n.splice(u--,1):(a=!1,s<l&&(l=s));if(a){e.splice(c--,1);var i=r();void 0!==i&&(t=i)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,r,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,s,l=n[0],a=n[1],u=n[2],i=0;if(l.some((function(t){return 0!==e[t]}))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(u)var c=u(o)}for(t&&t(n);i<l.length;i++)s=l[i],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(c)},n=self["webpackChunkconnecting_jobs_api"]=self["webpackChunkconnecting_jobs_api"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(9893)}));n=o.O(n)})();
//# sourceMappingURL=app.77bdddda.js.map